spring.application.name=music-api

# Load optional .env file when present (development convenience)
spring.config.import=optional:file:.env[.properties]

# External API credentials read from environment variables
spotify.accounts.base-url=${SPOTIFY_ACCOUNTS_BASE_URL:https://accounts.spotify.com}
spotify.api.base-url=${SPOTIFY_API_BASE_URL:https://api.spotify.com/v1}
spring.security.oauth2.client.registration.spotify.client-id=${SPOTIFY_CLIENT_ID:}
spring.security.oauth2.client.registration.spotify.client-secret=${SPOTIFY_CLIENT_SECRET:}
spring.security.oauth2.client.registration.spotify.redirect-uri=${SPOTIFY_REDIRECT_URI:http://localhost:8080/auth/callback}
spring.security.oauth2.client.registration.spotify.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.spotify.client-authentication-method=client_secret_basic
spring.security.oauth2.client.registration.spotify.scope=user-top-read,user-read-recently-played,playlist-modify-public,playlist-modify-private,user-read-private,user-read-playback-state,user-modify-playback-state,streaming
spring.security.oauth2.client.registration.spotify.client-name=Spotify
spring.security.oauth2.client.provider.spotify.authorization-uri=https://accounts.spotify.com/authorize
spring.security.oauth2.client.provider.spotify.token-uri=https://accounts.spotify.com/api/token
spring.security.oauth2.client.provider.spotify.user-info-uri=https://api.spotify.com/v1/me
spring.security.oauth2.client.provider.spotify.user-name-attribute=id
lastfm.api-key=${LASTFM_API_KEY:}
lastfm.default-country=${LASTFM_DEFAULT_COUNTRY:US}
lastfm.base-url=${LASTFM_BASE_URL:https://ws.audioscrobbler.com/2.0}
musicbrainz.base-url=${MUSICBRAINZ_BASE_URL:https://musicbrainz.org/ws/2}
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:5173}

# Database connection settings
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5433/musicdb}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:music}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:music123}
spring.datasource.driver-class-name=org.postgresql.Driver

# Flyway migration configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# Allow blocking calls within WebFlux handlers (development convenience)
spring.webflux.blocking-thread-check.enabled=false

# Reduce noise from Netty connection warnings (these are handled gracefully by circuit breakers)
logging.level.reactor.netty.http.client.HttpClientConnect=ERROR
logging.level.io.netty.channel.unix.Errors=ERROR